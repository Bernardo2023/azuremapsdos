<!DOCTYPE html>
<html>

<head>
    <title>Mapa azuremaps</title>
    <script type="text/javascript" src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.js"></script>
    <script type="text/javascript">
        var map, datasource;

            function GetMap() {
                // Crea un mapa en el elemento "mapDiv" y lo centra en una ubicación específica.
                map = new atlas.Map('mapDiv', {
                    center: [-98.193042, 19.046026], // Coordenadas de Puebla, México
                    zoom: 13,
                    view: 'Auto',
                    authOptions: {
                        authType: 'subscriptionKey',
                        subscriptionKey: 'CWfOCbYY2R3bV8CDeqD9biMVp4nqztcIixNYAe1Olxw'
                    }
                });

                // Escucha el evento 'ready' del mapa.
                map.events.add('ready', function () {
                    // Una vez que el mapa está listo, puedes agregar la fuente de datos.
                    datasource = new atlas.source.DataSource();
                    map.sources.add(datasource);

                    // Luego, agrega marcadores u otras capas a la fuente de datos y renderízalos en el mapa.
                    AddMarkers();
                });
            }

            function AddMarkers() {
                // Agrega marcadores para los nodos por defecto.
                var nodes = [
                    { 
                        name: 'Universidad Tecnológica de Puebla',
                        coordinates: [ -98.15190247952451, 19.05651037601117]
                    },
                    {
                        name: 'Catedral de la Ciudad de Puebla',
                        coordinates: [-98.194260, 19.043536]
                    },
                    {
                        name: 'Fuerte de Loreto',
                        coordinates: [-98.179803, 19.057880]
                    },
                    {
                        name: 'Fuente de los Frailes',
                        coordinates: [-98.187890, 19.040117]
                    }
                ];

                nodes.forEach(function (node) {
                    var marker = new atlas.Shape(new atlas.data.Point(node.coordinates), {
                        iconOptions: {
                            image: 'pin-round-blue.png', // Personaliza el icono del marcador
                            allowOverlap: true
                        }
                    });

                    // Agrega una propiedad personalizada para mostrar información adicional.
                    marker.setProperties({
                        name: node.name
                    });

                    datasource.add([marker]);
                });

                // Renderiza el mapa.
                map.layers.add(new atlas.layer.SymbolLayer(datasource));
            }

            // Llama a la función GetMap cuando se carga la página.
            window.onload = GetMap;
    </script>
    <style>
        /* Estilo personalizado para el marcador */
        .azure-maps-icon {
            width: 50px;
            height: 50px;
        }
    </style>
</head>

<body onload="GetMap();">
   <center>
    <div id="mapDiv" style="width: 100%; height: 600px;"></div>
   </center>
</body>

</html>